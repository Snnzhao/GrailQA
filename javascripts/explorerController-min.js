function shuffle(t){for(var i,e,r=t.length;r;)e=Math.floor(Math.random()*r--),i=t[r],t[r]=t[e],t[e]=i;return t}angular.module("Explorer",[]).controller("ExplorerController",function(t){function i(i){var e=$("#min-handle"),r=$("#max-handle");$("#complexity-slider").slider({range:!0,min:1,max:4,step:1,values:[1,4],create:function(){e.text(1),r.text(4)},slide:function(n,s){t.$apply(function(){e.text(s.values[0]),i.from=s.values[0],r.text(s.values[1]),i.to=s.values[1]})}})}this.total_data=shuffle(data),this.func_filter="",this.domain_filter="",this.complexity={from:1,to:4},this.generalization_filter="",this.correct_filter="",this.page=1,this.max_qs=50,this.model=Object.keys(model_predictions)[0],this.models=model_predictions,this.em=function(){var t=model_predictions[this.model],i=this.filtered_data(),e=0;return i.forEach(function(i){actual=i.s_expression,predicted=t[i.qid]?t[i.qid].logical_form:void 0,e=predicted===actual?e+1:e}),(e/i.length*100).toFixed(3)},this.f1=function(){var t=model_predictions[this.model],i=this.filtered_data(),e=0;return i.forEach(function(i){var r=0,n=new Set(i.answer.map(function(t){return t.answer_argument})),s=void 0;t[i.qid]&&t[i.qid].answer.length>0&&(s=new Set(t[i.qid].answer)),s&&(intersection=new Set(Array.from(n).filter(function(t){return s.has(t)})),recall=intersection.size/n.size,precision=intersection.size/s.size,r=2/(1/recall+1/precision)),e+=r}),e/=i.length,(100*e).toFixed(3)},this.total=this.total_data.length,this.filtered_data=function(){var t=this.total_data;if(this.func_filter&&0!==this.func_filter.length){const i={comparative:["<=","<",">",">="],superlative:["argmin","argmax"],count:["count"],none:["none"]},e=i[this.func_filter];t=t.filter(function(t){return e.includes(t.function)})}return this.domain_filter&&0!==this.domain_filter.length&&(t=t.filter(function(t){return t.domains.includes(this.domain_filter)},this)),t=t.filter(function(t){return t.num_edge<=this.complexity.to&&t.num_edge>=this.complexity.from},this),this.generalization_filter&&0!==this.generalization_filter.length&&(t=t.filter(function(t){return t.level===this.generalization_filter},this)),this.correct_filter&&0!==this.correct_filter.length&&(predictions=model_predictions[this.model],t="correct"===this.correct_filter?t.filter(function(t){return Object.hasOwnProperty.call(predictions,t.qid)&&t.s_expression===predictions[t.qid].logical_form},this):t.filter(function(t){return Object.hasOwnProperty.call(predictions,t.qid)&&t.s_expression!==predictions[t.qid].logical_form},this)),t},this.display_data=function(){var t=this.filtered_data();return this.total=t.length,t.slice(this.max_qs*(this.page-1),this.page*this.max_qs)},this.pageNums=function(){for(var t=[],i=0;i<Math.ceil(this.total/this.max_qs);i++)t.push(i+1);var e=[];const r=Math.floor(2.5);return e=this.page<=r?t.slice(0,5):this.page>=t.length-r?t.slice(t.length-5):t.slice(this.page-2,this.page+2),[e,t]},$(i(this.complexity)),this.reset=function(){this.total_data=shuffle(data),this.func_filter="",this.domain_filter="",this.complexity={from:1,to:4},this.generalization_filter="",$(i(this.complexity))}});